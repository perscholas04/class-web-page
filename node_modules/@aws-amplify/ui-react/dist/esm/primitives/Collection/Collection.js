import{__rest as e}from"../../node_modules/tslib/tslib.es6.js";import{jsx as s,jsxs as r}from"react/jsx-runtime";import i from"classnames";import t from"lodash/debounce";import*as a from"react";import{Flex as l}from"../Flex/Flex.js";import{Grid as o}from"../Grid/Grid.js";import{Pagination as n}from"../Pagination/Pagination.js";import{usePagination as c}from"../Pagination/usePagination.js";import{SearchField as m}from"../SearchField/SearchField.js";import{ComponentClassNames as d}from"../shared/constants.js";import{SharedText as h}from"../shared/i18n.js";import{strHasLength as g}from"../shared/utils.js";import{getPageCount as p,getItemsAtPage as j,itemHasText as u}from"./utils.js";const b=10,f=r=>{var{children:i,direction:t="column",items:a}=r,o=e(r,["children","direction","items"]);return s(l,Object.assign({direction:t},o,{children:Array.isArray(a)?a.map(i):null}))},P=r=>{var{children:i,items:t}=r,a=e(r,["children","items"]);return s(o,Object.assign({},a,{children:Array.isArray(t)?t.map(i):null}))},C=o=>{var{className:C,isSearchable:y,isPaginated:N,items:O,itemsPerPage:F=b,searchFilter:S=u,searchPlaceholder:A,type:I="list",testId:v}=o,x=e(o,["className","isSearchable","isPaginated","items","itemsPerPage","searchFilter","searchPlaceholder","type","testId"]);const[G,k]=a.useState(),L=a.useCallback(t(k,300),[k]);O=Array.isArray(O)?O:[],y&&g(G)&&(O=O.filter((e=>S(e,G))));const _=c({totalPages:p(O.length,F)});N&&(O=j(O,_.currentPage,F));const q="list"===I?s(f,Object.assign({className:d.CollectionItems,items:O},x)):"grid"===I?s(P,Object.assign({className:d.CollectionItems,items:O},x)):null;return r(l,Object.assign({testId:v,className:i(d.Collection,C)},{children:[y?s(l,Object.assign({className:d.CollectionSearch},{children:s(m,{label:h.Collection.SearchFieldLabel,placeholder:A,onChange:e=>L(e.target.value),onClear:()=>k("")})})):null,q,N?s(l,Object.assign({className:d.CollectionPagination},{children:s(n,Object.assign({},_))})):null]}))};C.displayName="Collection";export{C as Collection};
