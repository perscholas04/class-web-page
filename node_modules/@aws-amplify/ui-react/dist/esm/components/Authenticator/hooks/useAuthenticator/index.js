import{jsx as e}from"react/jsx-runtime";import*as t from"react";import{getSendEventAliases as r,getServiceContextFacade as s,createAuthenticatorMachine as n,listenToAuthHub as o}from"@aws-amplify/ui";import{useSelector as i,useInterpret as c}from"@xstate/react";import u from"lodash/isEmpty";import{areArrayValuesEqual as a}from"../../../../helpers/utils.js";const m=t.createContext({}),f=({children:r})=>{const s=t.useContext(m),i={service:c(n)},a=u(s)?i:s,{service:{send:f}}=a,p=t.useRef(!1);return t.useEffect((()=>{if(!p.current)return p.current=!0,o(f)}),[f]),e(m.Provider,Object.assign({value:a},{children:r}))},p=e=>{const n=(()=>{const{service:e}=t.useContext(m);if(!e)throw new Error("Please ensure you wrap your App with `Authenticator.Provider`.\nSee the `useAuthenticator` section on https://ui.docs.amplify.aws/components/authenticator.");return e})(),{send:o}=n,c=t.useMemo((()=>r(o)),[o]),u=e=>Object.assign(Object.assign({},c),s(e)),f=t.useRef(),p=i(n,(e=>e),((t,r)=>{if(!e)return!1;const s=f.current,n=u(r);if(f.current=n,!s)return!1;const o=e(s),i=e(n);return a(o,i)}));return Object.assign(Object.assign({},u(p)),{_state:p,_send:o})};export{m as AuthenticatorContext,f as Provider,p as useAuthenticator};
