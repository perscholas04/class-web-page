import{__rest as o,__awaiter as i}from"../../../node_modules/tslib/tslib.es6.js";import{jsx as e}from"react/jsx-runtime";import{Amplify as t,Auth as r}from"aws-amplify";import l from"maplibre-gl";import{AmplifyMapLibreRequest as a}from"maplibre-gl-js-amplify";import{useState as m,useMemo as n,useEffect as s}from"react";import p from"react-map-gl";const c=c=>{var v,d,{mapLib:f,mapStyle:u,style:g}=c,b=o(c,["mapLib","mapStyle","style"]);const y=t.configure(),[_,j]=m(),h=n((()=>Object.assign({height:"100vh",position:"relative",width:"100vw"},g)),[g]);return s((()=>{i(void 0,void 0,void 0,(function*(){var o;const i=yield r.currentUserCredentials();if(i){const e=null===(o=y.geo)||void 0===o?void 0:o.amazon_location_service.region,{transformRequest:t}=new a(i,e);j((()=>t))}}))}),[null===(v=y.geo)||void 0===v?void 0:v.amazon_location_service.region]),_?e(p,Object.assign({},b,{mapLib:null!=f?f:l,mapStyle:null!=u?u:null===(d=y.geo)||void 0===d?void 0:d.amazon_location_service.maps.default,style:h,transformRequest:_})):null};export{c as MapView};
