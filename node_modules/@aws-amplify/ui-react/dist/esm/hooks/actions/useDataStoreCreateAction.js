import{__awaiter as e}from"../../node_modules/tslib/tslib.es6.js";import{Hub as s,DataStore as t}from"aws-amplify";import{UI_CHANNEL as o,ACTION_DATASTORE_CREATE_STARTED as i,EVENT_ACTION_DATASTORE_CREATE as a,ACTION_DATASTORE_CREATE_FINISHED as r}from"./constants.js";import{getErrorMessage as d}from"../../helpers/utils.js";import{AMPLIFY_SYMBOL as m}from"../../helpers/constants.js";import{useTypeCastFields as l}from"./shared/useTypeCastFields.js";const n=({model:n,fields:p,schema:c})=>{const f=l({fields:p,modelName:n.name,schema:c});return()=>e(void 0,void 0,void 0,(function*(){try{s.dispatch(o,{event:i,data:{fields:f}},a,m);const e=yield t.save(new n(f));s.dispatch(o,{event:r,data:{fields:f,item:e}},a,m)}catch(e){s.dispatch(o,{event:r,data:{fields:f,errorMessage:d(e)}},a,m)}}))};export{n as useDataStoreCreateAction};
